{"ast":null,"code":"var _jsxFileName = \"D:\\\\reactjs\\\\feedback-app-ts\\\\src\\\\components\\\\context\\\\FeedbackContext.tsx\",\n    _s = $RefreshSig$();\n\nimport { createContext, useState, useEffect } from 'react';\nimport { mapDeepCopy } from '../../utils';\nimport { v4 as uuidv4 } from 'uuid';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const FeedbackContext = /*#__PURE__*/createContext({});\nexport const FeedbackProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const [feedback, setFeedback] = useState(null);\n  const [feedbackEdit, setFeedbackEdit] = useState({\n    item: null,\n    edit: false\n  });\n  useEffect(() => {\n    console.log(123);\n  }, []);\n  const baseUrl = `http://localhost:5000/`;\n\n  const fetchFeedback = async () => {\n    const response = await fetch(`${baseUrl}feedbacks?_sort=id&_order=des`);\n    const data = await response.json();\n  };\n\n  const deleteFeedback = id => {\n    if (window.confirm(`are you sure you want to delete the item :  ${JSON.stringify(feedback === null || feedback === void 0 ? void 0 : feedback.get(id))} ?`)) {\n      const copy = mapDeepCopy(feedback);\n\n      if (copy !== null && copy !== void 0 && copy.delete(id)) {\n        setFeedback(copy);\n      }\n    }\n  };\n\n  const addFeedback = newFeedback => {\n    newFeedback.setId(uuidv4());\n    console.log(JSON.stringify(newFeedback));\n    const fb = mapDeepCopy(feedback);\n    fb === null || fb === void 0 ? void 0 : fb.set(newFeedback.id, newFeedback);\n    setFeedback(fb);\n  };\n\n  const editFeedback = item => {\n    if (!item) {\n      return;\n    }\n\n    setFeedbackEdit({\n      item: item.item,\n      edit: true\n    });\n  };\n\n  const updateFeedback = item => {\n    if (!item || !item.item) {\n      return;\n    }\n\n    const fb = mapDeepCopy(feedback);\n    fb === null || fb === void 0 ? void 0 : fb.set(item.item.id, item.item);\n    setFeedback(fb);\n  };\n\n  return /*#__PURE__*/_jsxDEV(FeedbackContext.Provider, {\n    value: {\n      feedbacks: feedback,\n      deleteFeedback: deleteFeedback,\n      addFeedback: addFeedback,\n      editFeedback: editFeedback,\n      feedbackEdit: feedbackEdit,\n      updateFeedback\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 12\n  }, this);\n};\n\n_s(FeedbackProvider, \"6KSiLU0oBE0zibZu6yDxWm70eqw=\");\n\n_c = FeedbackProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"FeedbackProvider\");","map":{"version":3,"names":["createContext","useState","useEffect","mapDeepCopy","v4","uuidv4","FeedbackContext","FeedbackProvider","children","feedback","setFeedback","feedbackEdit","setFeedbackEdit","item","edit","console","log","baseUrl","fetchFeedback","response","fetch","data","json","deleteFeedback","id","window","confirm","JSON","stringify","get","copy","delete","addFeedback","newFeedback","setId","fb","set","editFeedback","updateFeedback","feedbacks"],"sources":["D:/reactjs/feedback-app-ts/src/components/context/FeedbackContext.tsx"],"sourcesContent":["import { createContext, ReactNode, useState, useEffect } from 'react';\r\nimport { mapDeepCopy, OrNull } from '../../utils';\r\nimport { Feedback, FeedbackInterface } from '../FeedbackForm';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport { FeedbackItemEditInterface } from '../FeedbackItem';\r\n\r\n\r\nexport interface FeedbackProviderModelInterface  {\r\n    children ? : ReactNode,\r\n    feedbacks?: OrNull<Map<string, FeedbackInterface>>,\r\n    deleteFeedback ? : (id : string) => void,\r\n    addFeedback  ? : (newFeedback: Feedback) => void,\r\n    editFeedback ? : (item: OrNull<FeedbackItemEditInterface>) => void,\r\n    feedbackEdit ? : FeedbackItemEditInterface,\r\n    updateFeedback ? : (item: OrNull<FeedbackItemEditInterface>) => void\r\n}\r\nexport const FeedbackContext = createContext<FeedbackProviderModelInterface>({});\r\nexport const FeedbackProvider = ({children} : FeedbackProviderModelInterface) =>{\r\n    const [feedback, setFeedback] = useState<OrNull<Map<string, FeedbackInterface>>>(null);\r\n    const [feedbackEdit, setFeedbackEdit] = useState<FeedbackItemEditInterface>({ item:null, edit: false });\r\n\r\n    useEffect(() => {\r\n        console.log(123)\r\n    }, []);\r\n    const baseUrl = `http://localhost:5000/`;\r\n    const fetchFeedback = async () => {\r\n        const response = await fetch(`${baseUrl}feedbacks?_sort=id&_order=des`);\r\n        const data = await response.json();\r\n    }\r\n\r\n    const deleteFeedback = (id: string): void => {\r\n        if (window.confirm(`are you sure you want to delete the item :  ${JSON.stringify(feedback?.get(id))} ?`)) {\r\n            const copy = mapDeepCopy(feedback);\r\n            if (copy?.delete(id)) {\r\n                setFeedback(copy);\r\n            }\r\n        }\r\n\r\n    }\r\n    const addFeedback = (newFeedback: Feedback): void => {\r\n        newFeedback.setId(uuidv4());\r\n        console.log(JSON.stringify(newFeedback))\r\n        const fb = mapDeepCopy(feedback);\r\n        fb?.set(newFeedback.id, newFeedback);\r\n        setFeedback(fb);\r\n\r\n    }\r\n\r\n    const editFeedback = (item : OrNull<FeedbackItemEditInterface>) : void => {\r\n        if (!item){\r\n            return;\r\n        }\r\n        setFeedbackEdit({item : item.item , edit: true});\r\n        \r\n    }\r\n\r\n    const updateFeedback = (item: OrNull<FeedbackItemEditInterface>) : void => {\r\n        if (!item || !item.item ) {\r\n            return;\r\n        }\r\n        const fb = mapDeepCopy(feedback);\r\n        fb?.set(item.item.id, item.item);\r\n        setFeedback(fb);\r\n    }\r\n\r\n\r\n    return <FeedbackContext.Provider value={{\r\n        feedbacks: feedback,\r\n        deleteFeedback: deleteFeedback,\r\n        addFeedback: addFeedback,\r\n        editFeedback: editFeedback,\r\n        feedbackEdit: feedbackEdit,\r\n        updateFeedback,\r\n    }}>\r\n        {children}\r\n    </FeedbackContext.Provider>\r\n}"],"mappings":";;;AAAA,SAASA,aAAT,EAAmCC,QAAnC,EAA6CC,SAA7C,QAA8D,OAA9D;AACA,SAASC,WAAT,QAAoC,aAApC;AAEA,SAASC,EAAE,IAAIC,MAAf,QAA6B,MAA7B;;AAaA,OAAO,MAAMC,eAAe,gBAAGN,aAAa,CAAiC,EAAjC,CAArC;AACP,OAAO,MAAMO,gBAAgB,GAAG,QAAgD;EAAA;;EAAA,IAA/C;IAACC;EAAD,CAA+C;EAC5E,MAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BT,QAAQ,CAAyC,IAAzC,CAAxC;EACA,MAAM,CAACU,YAAD,EAAeC,eAAf,IAAkCX,QAAQ,CAA4B;IAAEY,IAAI,EAAC,IAAP;IAAaC,IAAI,EAAE;EAAnB,CAA5B,CAAhD;EAEAZ,SAAS,CAAC,MAAM;IACZa,OAAO,CAACC,GAAR,CAAY,GAAZ;EACH,CAFQ,EAEN,EAFM,CAAT;EAGA,MAAMC,OAAO,GAAI,wBAAjB;;EACA,MAAMC,aAAa,GAAG,YAAY;IAC9B,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAE,GAAEH,OAAQ,+BAAZ,CAA5B;IACA,MAAMI,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAT,EAAnB;EACH,CAHD;;EAKA,MAAMC,cAAc,GAAIC,EAAD,IAAsB;IACzC,IAAIC,MAAM,CAACC,OAAP,CAAgB,+CAA8CC,IAAI,CAACC,SAAL,CAAenB,QAAf,aAAeA,QAAf,uBAAeA,QAAQ,CAAEoB,GAAV,CAAcL,EAAd,CAAf,CAAkC,IAAhG,CAAJ,EAA0G;MACtG,MAAMM,IAAI,GAAG3B,WAAW,CAACM,QAAD,CAAxB;;MACA,IAAIqB,IAAJ,aAAIA,IAAJ,eAAIA,IAAI,CAAEC,MAAN,CAAaP,EAAb,CAAJ,EAAsB;QAClBd,WAAW,CAACoB,IAAD,CAAX;MACH;IACJ;EAEJ,CARD;;EASA,MAAME,WAAW,GAAIC,WAAD,IAAiC;IACjDA,WAAW,CAACC,KAAZ,CAAkB7B,MAAM,EAAxB;IACAU,OAAO,CAACC,GAAR,CAAYW,IAAI,CAACC,SAAL,CAAeK,WAAf,CAAZ;IACA,MAAME,EAAE,GAAGhC,WAAW,CAACM,QAAD,CAAtB;IACA0B,EAAE,SAAF,IAAAA,EAAE,WAAF,YAAAA,EAAE,CAAEC,GAAJ,CAAQH,WAAW,CAACT,EAApB,EAAwBS,WAAxB;IACAvB,WAAW,CAACyB,EAAD,CAAX;EAEH,CAPD;;EASA,MAAME,YAAY,GAAIxB,IAAD,IAAqD;IACtE,IAAI,CAACA,IAAL,EAAU;MACN;IACH;;IACDD,eAAe,CAAC;MAACC,IAAI,EAAGA,IAAI,CAACA,IAAb;MAAoBC,IAAI,EAAE;IAA1B,CAAD,CAAf;EAEH,CAND;;EAQA,MAAMwB,cAAc,GAAIzB,IAAD,IAAoD;IACvE,IAAI,CAACA,IAAD,IAAS,CAACA,IAAI,CAACA,IAAnB,EAA0B;MACtB;IACH;;IACD,MAAMsB,EAAE,GAAGhC,WAAW,CAACM,QAAD,CAAtB;IACA0B,EAAE,SAAF,IAAAA,EAAE,WAAF,YAAAA,EAAE,CAAEC,GAAJ,CAAQvB,IAAI,CAACA,IAAL,CAAUW,EAAlB,EAAsBX,IAAI,CAACA,IAA3B;IACAH,WAAW,CAACyB,EAAD,CAAX;EACH,CAPD;;EAUA,oBAAO,QAAC,eAAD,CAAiB,QAAjB;IAA0B,KAAK,EAAE;MACpCI,SAAS,EAAE9B,QADyB;MAEpCc,cAAc,EAAEA,cAFoB;MAGpCS,WAAW,EAAEA,WAHuB;MAIpCK,YAAY,EAAEA,YAJsB;MAKpC1B,YAAY,EAAEA,YALsB;MAMpC2B;IANoC,CAAjC;IAAA,UAQF9B;EARE;IAAA;IAAA;IAAA;EAAA,QAAP;AAUH,CA3DM;;GAAMD,gB;;KAAAA,gB"},"metadata":{},"sourceType":"module"}